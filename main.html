<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meine Website</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="body">
    <div class="starfield"></div>
    <div class="top-header-area">
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="Search...">
            <button id="search-button">Search</button>
        </div>
        <div class="datetime-display">
            <span id="current-datetime"></span>
        </div>
    </div>
    <div class="portfolio-container">
        <div class="top-right-decoration"></div>
        <div class="left-column">
            <h1 class="main-title"><span class="orange-hash">#</span> FABIAN HOESS</h1>
            <div class="shape-container">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
            </div>
            <div class="contact-details">
                <h2>Kontaktdaten</h2>
                <ul>
                    <li><a href="https://www.google.com/maps/search/?api=1&query=Meisebacher+Straße+44+36251+Bad+Hersfeld" target="_blank">Meisebacher Straße 44, 36251 Bad Hersfeld</a></li>
                    <li>49 015203974076</li>
                    <li><a href="mailto:hoessfabian55@gmail.com">hoessfabian55@gmail.com</a></li>
                </ul>
            </div>
            <div class="attachments">
                <h2>Anlagen</h2>
                <ul>
                    <li>Anschreiben</li>
                    <li>Lebenslauf</li>
                    <li>Zeugnisse</li>
                    <li>Empfehlungsscheiben</li>
                </ul>
                <a href="Konzept_Fabian_Hoeß.pdf" download class="download-button">Download Resume</a>
            </div>
        </div>
        <div class="right-column">
            <div class="profile-text-wrapper">
                <div class="profile-section">
                    <img src="https://via.placeholder.com/180" alt="Fabian Hoess" class="profile-pic">
                </div>
                <div class="text-block">
                    <p>
                        schon früh habe ich meine Begeisterung für Technik, Logik und Programmierung entdeckt. Angenfangen hat alles mit Lego und Lego Technik.
                    </p>
                    <p>
                        Später konnte ich erste Programmiererfahrungen in einer Mindstorms-AG sammeln. Dort entwickelte ich gemeinsam mit meinem Team Roboter, die mithilfe von Sensoren programmiert wurden – unter anderem für Aufgaben wie Pathfinding. Dabei lernte ich nicht nur das Zusammenspiel von Hardware und Software kennen, sondern auch, technische Probleme systematisch und kreativ zu lösen.
                    </p>
                </div>
            </div>
            <div class="signature">
                Fabian Hoeß
            </div>
        </div>
        <div class="bottom-left-decoration"></div>
    </div>

    <hr class="section-divider">

    <div class="experience-container">
        <h1 class="main-title"><span class="orange-hash">#</span>ERFAHRUNG</h1>
        <div class="experience-section">
            <h2>08/2025 - HEUTE</h2>
            <h3>Berufsvorbereitende Bildungsmaßnahme</h3>
            <ul>
                <li>Berufsorientierung</li>
                <li>Bewerbungstraining</li>
                <li>Berufspraktische Erprobung</li>
            </ul>
        </div>
        <div class="experience-section">
            <h2>02/2025 - 04/2025</h2>
            <h3>IT & Medienkompetenz</h3>
            <h4>AEM August Elektronik GmbH</h4>
            <ul>
                <li>Gestaltung einer Webseite</li>
                <li>HTML & CSS</li>
                <li>Arbeiten mit dem Raspberry Pi</li>
                <li>Einblicke in IT-Systeme</li>
            </ul>
        </div>
    </div>

    <hr class="section-divider">

    <div class="skills-container">
        <h1 class="main-title"><span class="orange-hash">#</span>SKILLS</h1>
        <div class="skill-item">
            <span class="skill-name">HTML</span>
            <div class="skill-bar-container">
                <div class="skill-bar" style="width: 90%;"></div>
            </div>
        </div>
        <div class="skill-item">
            <span class="skill-name">CSS</span>
            <div class="skill-bar-container">
                <div class="skill-bar" style="width: 80%;"></div>
            </div>
        </div>
        <div class="skill-item">
            <span class="skill-name">Python</span>
            <div class="skill-bar-container">
                <div class="skill-bar" style="width: 70%;"></div>
            </div>
        </div>
    </div>

    <hr class="section-divider">

    <div class="projects-container">
        <h1 class="main-title"><span class="orange-hash">#</span>PROJECTS</h1>
        <div class="project-grid">
            <!-- Project cards will be loaded dynamically here -->
        </div>
    </div>

    <button id="back-to-top">⬆</button>

    <div id="project-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <img id="modal-project-image" src="" alt="Project Image">
            <h3 id="modal-project-title"></h3>
            <p id="modal-project-description"></p>
            <div class="modal-links">
                <a id="modal-live-link" href="#" target="_blank">View Live</a>
                <a id="modal-github-link" href="#" target="_blank">GitHub</a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Datetime Display Functionality
            const currentDatetimeSpan = document.getElementById('current-datetime');

            function updateDatetime() {
                const now = new Date();
                const options = {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                };
                currentDatetimeSpan.textContent = now.toLocaleDateString('de-DE', options);
            }

            // Initial call and then update every second
            updateDatetime();
            setInterval(updateDatetime, 1000);

            // Search Bar Functionality (modified to include dynamically loaded projects)
            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');
            const skillItems = document.querySelectorAll('.skill-item');
            const experienceSections = document.querySelectorAll('.experience-section');
            const projectGrid = document.querySelector('.project-grid');

            function filterElements() {
                const query = searchInput.value.toLowerCase();
                const allFilterableElements = document.querySelectorAll('.project-card, .skill-item, .experience-section');

                allFilterableElements.forEach(element => {
                    const text = element.textContent.toLowerCase();
                    if (text.includes(query)) {
                        if (element.classList.contains('skill-item')) {
                            element.style.display = 'flex';
                        } else {
                            element.style.display = 'block';
                        }
                    } else {
                        element.style.display = 'none';
                    }
                });
            }

            searchButton.addEventListener('click', filterElements);
            searchInput.addEventListener('keyup', filterElements);


            // Back to Top Button Functionality
            const backToTopButton = document.getElementById('back-to-top');

            function scrollToTop() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }

            backToTopButton.addEventListener('click', scrollToTop);

            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 200) {
                    backToTopButton.style.display = 'flex';
                } else {
                    backToTopButton.style.display = 'none';
                }
            });
            if (window.pageYOffset === 0) {
                backToTopButton.style.display = 'none';
            }

            // Interactive Skill Bars Functionality
            const skillBars = document.querySelectorAll('.skill-bar');

            const observerOptions = {
                root: null, // viewport
                rootMargin: '0px',
                threshold: 0.5 // trigger when 50% of the item is visible
            };

            const skillObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const skillBar = entry.target;
                        const skillWidth = skillBar.style.width; // Get inline width
                        skillBar.style.setProperty('--skill-width', skillWidth); // Set CSS custom property
                        skillBar.classList.add('animate');
                        observer.unobserve(skillBar); // Stop observing once animated
                    }
                });
            }, observerOptions);

            skillBars.forEach(skillBar => {
                skillObserver.observe(skillBar);
            });

            // Project Card Modal Functionality (modified to work with dynamically loaded projects)
            const projectModal = document.getElementById('project-modal');
            const closeButton = projectModal.querySelector('.close-button');
            const modalProjectImage = document.getElementById('modal-project-image');
            const modalProjectTitle = document.getElementById('modal-project-title');
            const modalProjectDescription = document.getElementById('modal-project-description');
            const modalLiveLink = document.getElementById('modal-live-link');
            const modalGithubLink = document.getElementById('modal-github-link');

            function openModal(event) {
                event.preventDefault(); // Prevent default link behavior

                const link = event.currentTarget;
                const projectImage = link.dataset.projectImage;
                const projectTitle = link.dataset.projectTitle;
                const projectDescription = link.dataset.projectDescription;
                const liveLink = link.dataset.liveLink;
                const githubLink = link.dataset.githubLink;

                modalProjectImage.src = projectImage;
                modalProjectTitle.textContent = projectTitle;
                modalProjectDescription.textContent = projectDescription;
                modalLiveLink.href = liveLink;
                modalGithubLink.href = githubLink;

                projectModal.style.display = 'flex'; // Show modal
            }

            function closeModal() {
                projectModal.style.display = 'none'; // Hide modal
            }

            closeButton.addEventListener('click', closeModal);

            // Close modal when clicking outside of the modal content
            window.addEventListener('click', function(event) {
                if (event.target == projectModal) {
                    closeModal();
                }
            });

            // Dynamic Project Loading from Backend
            async function loadProjects() {
                try {
                    const response = await fetch('/api/projects');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const projects = await response.json();
                    
                    projectGrid.innerHTML = ''; // Clear existing projects

                    projects.forEach(project => {
                        const projectCard = document.createElement('div');
                        projectCard.classList.add('project-card');

                        projectCard.innerHTML = `
                            <img src="${project.image}" alt="${project.name}">
                            <h3>${project.title}</h3>
                            <p>${project.description}</p>
                            <a href="javascript:void(0)"
                               data-project-image="${project.image}"
                               data-project-title="${project.title}"
                               data-project-description="${project.description}"
                               data-live-link="${project.live_link || '#'}"
                               data-github-link="${project.github_url}">View Details</a>
                        `;
                        projectGrid.appendChild(projectCard);

                        // Attach modal event listener to the new link
                        projectCard.querySelector('a').addEventListener('click', openModal);
                    });
                } catch (error) {
                    console.error('Error loading projects:', error);
                    projectGrid.innerHTML = '<p>Failed to load projects. Please try again later.</p>';
                }
            }

            loadProjects(); // Call to load projects on page load
        });
    </script>
</body>
</html>